<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Real Estate Investment Calculator | Thomas Officer</title>
  <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet" type="text/css" />
  <link rel="icon" href="assets/tfo-favicon.ico" type="image/x-icon">
  <script>
    function updateResults() {
      // Pull values from calculator
      var purchasePrice = parseFloat(document.getElementById('purchase-price').value);
      var downPaymentPercentage = parseFloat(document.getElementById('downpayment-percentage').value) || 100;
      var loanTerm = parseFloat(document.getElementById('loan-term').value);
      var interestRate = parseFloat(document.getElementById('interest-rate').value);
      var monthlyInterestRate = interestRate / 12 / 100; // Convert annual rate to a decimal monthly rate
      var totalPayments = loanTerm * 12;
      var rehabCost = parseFloat(document.getElementById('rehab-cost').value) || 0;
      var transferTax = parseFloat(document.getElementById('transfer-tax').value);
      var closingCost = parseFloat(document.getElementById('closing-cost').value);
      var loanPayment = parseFloat(document.getElementById('loan-payment').value);
      var propertyTaxes = parseFloat(document.getElementById('property-taxes').value);
      var homeInsurance = parseFloat(document.getElementById('home-insurance').value);
      var repairsMaintenance = parseFloat(document.getElementById('repairs-maintenance').value);
      var vacancy = parseFloat(document.getElementById('vacancy').value);
      var capex = parseFloat(document.getElementById('capex').value);
      var mgtFees = parseFloat(document.getElementById('mgt-fees').value);
      var hoaDues = parseFloat(document.getElementById('hoa-dues').value);
      var electricity = parseFloat(document.getElementById('electricity').value);
      var gas = parseFloat(document.getElementById('gas').value);
      var water = parseFloat(document.getElementById('water').value);
      var garbage = parseFloat(document.getElementById('garbage').value);
      var monthlyIncome = parseFloat(document.getElementById('monthly-income').value);
      
      // Calculations
      var downPayment = purchasePrice * downPaymentPercentage / 100;
      var upfrontCost = rehabCost + downPayment;
      var principal = purchasePrice - downPayment;
      var monthlyLoanPayment = (monthlyInterestRate * principal) / (1 - Math.pow(1 + monthlyInterestRate, - totalPayments)) || 0;

      // Set results
      document.getElementById('upfront-cost').innerText = '$' + upfrontCost.toFixed(2);
      document.getElementById('loan-payment').innerText = '$' + monthlyLoanPayment.toFixed(2);
    }
  </script>
</head>
</head>

<body>
  <div class="calc-nav">
    <div class="cal-nav__wrapper">
      <h1>Real Estate Investment Calculator</h1>
      <p>
        Generate and share back-of-the-napkin calculations for a propertyâ€™s rehab, financing, and income expectations.
      </p>    
    </div>
  </div>
  <div class="calc-main">
    <div class="calc-main__wrapper">
      <div class="calc">
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="purchase-price">Purchase price:</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="purchase-price" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="downpayment-percentage">Downpayment %</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="downpayment-percentage" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="loan-term">Loan term (years)</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="loan-term" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="interest-rate">Interest rate</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="interest-rate" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="rehab-cost">Rehab cost</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="rehab-cost" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="transfer-tax">Transfer tax</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="transfer-tax" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="closing-cost">Closing cost</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="closing-cost" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="loan-payment">Loan payment</label> 
          </div>
          <div class="calc__row__rightCol">
            <p id="loan-payment"></p>
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="property-taxes">Property taxes</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="property-taxes" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="home-insurance">Home insurance</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="home-insurance" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="repairs-maintenance">Repairs & maintenance</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="repairs-maintenance" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="vacancy">Vacancy</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="vacancy" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="capex">Capital expenditures</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="capex" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="mgt-fees">Management fees</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="mgt-fees" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="hoa-dues">HOA Dues</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="hoa-dues" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="electricity">Electricity</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="electricity" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="gas">Gas</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="gas" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="water">Water / Sewer</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="water" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="garbage">Garbage</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="garbage" oninput="updateResults()">
          </div>
        </div>
        <div class="calc__row">
          <div class="calc__row__leftCol">
            <label for="monthly-income">Monthly income</label> 
          </div>
          <div class="calc__row__rightCol">
            <input type="number" id="monthly-income" oninput="updateResults()">
          </div>
        </div>      
      </div>
      <div class="results">
        <div class="results__header-row">
          <div class="results__header-row__col">
            <h3>
              Upfront cost
            </h3>
            <p id="upfront-cost">$0</p>
          </div>
          <div class="results__header-row__col">
            <h3>
              Cashflow
            </h3>
            <p id="cashflow-monthly">$0</p>
            <p id="cashflow-annually">$0</p>
          </div>
          <div class="results__header-row__col">
            <h3>
              Cap rate
            </h3>
            <p id="cap-rate">0</p>
          </div>
          <div class="results__header-row__col">
            <h3>
              Estimated value after 20 years
            </h3>
            <p id="appreciation">$0</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>